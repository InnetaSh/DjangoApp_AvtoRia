{% extends "main/base_profile.html" %}
{% load crispy_forms_tags %}
{% block content %}
    <div class="content-section">
      <div class="media">
        <img class="rounded-circle account-img" src="{{ user.profile.image.url }}">
        <div class="media-body flex">
          <h2 class="account-heading">Wellcome, {{ user.username }}!</h2>
          <p class="text-secondary">{{ user.email }}</p>
        </div>
      </div>
        <div class="flexSpaceBetween">
            <a class="menuBlock {% if request.resolver_match.url_name == 'all_notice' %}active{% endif %}" href="{% url 'all_notice' %}">–í—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</a>

            <a class="menuBlock {% if request.resolver_match.url_name == 'my_notice' %}active{% endif %}" href="{% url 'my_notice' %}">–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</a>

            <a class="menuBlock {% if request.resolver_match.url_name == 'hour24_notice' %}active{% endif %}" href="{% url 'hour24_notice' %}">–∑–∞ 24 —á–∞—Å–∞</a>

            <a class="menuBlock {% if request.resolver_match.url_name == 'favorite_notice' %}active{% endif %}" href="{% url 'favorite_notice' %}">–ò–∑–±—Ä–∞–Ω–Ω—ã–µ</a>
        </div>
    </div>
 <div class="main">
        {% if notices %}
           <div class="notices-grid">
            {% for notice in notices %}
                <div class="notice-card">
                   <h2 class="flexSpaceBetween">
                        <a class="decorationNone" href="{% url 'detail' notice_id=notice.id %}">{{ notice.title }}</a>

                        {% if user.is_authenticated %}
                            {% if request.resolver_match.url_name == 'my_notice' %}
                                <div>
                                    <a class="decorationNone" href="{% url 'edit_notice' notice.id %}" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ">‚úé</a>
                                     <a class="decorationNone" href="{% url 'delete_notice' notice.id %}" title="–£–¥–∞–ª–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ" onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ?');">üóë</a>
                               </div>
                            {% elif notice.id in favorite_ids %}
                                <a class="decorationNone" href="{% url 'remove_from_favorites' notice.id %}" title="–£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ">‚≠ê</a>
                            {% else %}
                                <a class="decorationNone" href="{% url 'add_to_favorites' notice.id %}" title="–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ">‚òÜ</a>
                            {% endif %}
                        {% endif %}
                    </h2>

                    <p><b>–ú–∞—Ä–∫–∞:</b> {{ notice.marka }}</p>
                    <p><b>–ú–æ–¥–µ–ª—å:</b> {{ notice.model }}</p>
                    <p><b>–¶–µ–Ω–∞: </b>{{ notice.price }}$</p>
                    <p>–û–ø–∏—Å–∞–Ω–∏–µ: {{ notice.description|truncatewords:3 }}...</p>
                    <p>–û–±–ª–∞—Å—Ç—å: {{ notice.region|default:"–ù–µ —É–∫–∞–∑–∞–Ω" }}</p>

                    {% if notice.photo %}
                        <img src="/media/{{ notice.photo }}" alt="–§–æ—Ç–æ –∞–≤—Ç–æ" style="max-width:100%; height:auto;">
                    {% endif %}

                    <p class="notice-date">–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: {{ notice.created_at }}</p>


                </div>
            {% endfor %}
        </div>
        {% else %}
            <p>–û–±—ä—è–≤–ª–µ–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç.</p>
        {% endif %}
    </div>
{% endblock content %}